<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./main.css">

    <style>
        * {
            padding: 0;
            margin: 0;
        }
        .container {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: calc(100vh - 48px);
        }
        .player-controller {
            display: flex;
            justify-content: center; /* 水平居中play-bar-wrap */
            align-items: center; /* 垂直居中所有元素 */
            width: 1060px;
            margin: 0 auto;
        }

        .play-bar-wrap {
            flex: 1; /* 让play-bar-wrap占据剩余空间 */
            background-color: burlywood;
            text-align: center; /* 使play-bar-wrap内的内容水平居中 */
            height: 16px; /* 保持高度一致 */
        }
        .play-time-inner {
            display: flex;
        }

        .play-control-btn {
            display: flex;
            justify-content: space-between; /* 使按钮两端对齐 */
            align-items: center; /* 垂直居中 */
            /* 根据需要设置宽度，或使用flex-grow来控制宽度 */
            width: 1060px; /* 假设宽度，根据实际情况调整 */
        }

        svg {
            text-align: center;
        }

        #progressBar {
            width: 0%; /* 初始宽度为0% */
            height: 16px;
            background-color: #4caf50; /* 进度条颜色 */
        }
        @media screen and (max-width: 1060px) {
            .container .player-controller {
                width: 90%;
            }
            .play-control-btn {
                width: 98%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>123</h2>
        <div class="contain">
            <div class="box">
                <ul>
                 <!-- // 这里等后面使用js动态生成 -->
                </ul>
            </div>
            <!-- <audio src="../audio/obj_wo3DlMOGwrbDjj7DisKw_14096444297_c5a0_2580_a9e4_999a4f077c17e140ff120c643b5deb74.mp3" controls></audio> -->
    
        </div>
        <script src="./main.js" type="module"></script>
        <div class="player-controller">
            <div class="play-control-btn">
                <span>
                    <!-- 上一首 -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z" fill="#808080"></path>
                    </svg>
                    <!-- 播放/暂停 -->
                    <svg id="play-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M25.468 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z" fill="#808080"></path>
                    </svg>
                    
                    <svg id="pause-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M21.468 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM10.28 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z" fill="#808080"></path>
                    </svg>

                    <!-- 下一首 -->
                    <svg transform="rotate(180)" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z" fill="#808080"></path>
                    </svg>
                </span>
                
                <div class="play-time-inner">
                    <span id="currentTime">00:00</span> / 
                    <span id="totalTime">00:00</span>
                </div>
                <div class="play-bar-wrap">
                    <div id="progressBar"></div>
                </div>
                <span>
                    <!-- 音量 -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M18.468 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM26.334 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z" fill="#808080"/>
                    </svg>
                    <!-- 播放模式 -->
                    <svg id="ramdom-play-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z" fill="#808080"></path>
                    </svg>
                    <svg id="list-play-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z" fill="#808080"></path>
                    </svg>

                    <!-- 循环模式 -->
                    <svg ref="listMode" id="always-list-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z" fill="#808080"></path>
                    </svg>
                    
                    <svg ref="listMode" id="one-list-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z" fill="#808080"></path>
                    </svg>
                    
                    <svg ref="listMode" id="never-list-btn" xmlns="http://www.w3.org/2000/svg" width="40px" version="1.1" viewBox="0 0 32 32">
                        <path d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z" fill="#808080"></path>
                    </svg>
                </span>
            </div>
        </div>

        <audio id="audioPlayer" src="../audio/obj_wo3DlMOGwrbDjj7DisKw_14096444297_c5a0_2580_a9e4_999a4f077c17e140ff120c643b5deb74.mp3"></audio>
    </div>


    <script>
        // 获取播放和暂停按钮的DOM元素
        var playBtn = document.getElementById('play-btn');
        var pauseBtn = document.getElementById('pause-btn');

        // 获取随机播放和循环播放按钮的DOM元素
        var ramdomBtn = document.getElementById('ramdom-play-btn');
        var listBtn = document.getElementById('list-play-btn');

        // 获取循环播放三个按钮的DOM元素
        var alwatsBtn = document.getElementById('always-list-btn');
        var oneBtn = document.getElementById('one-list-btn');
        var neverBtn = document.getElementById('never-list-btn');


        // 默认显示播放按钮
        playBtn.style.display = 'inline-block';
        pauseBtn.style.display = 'none';

        
        ramdomBtn.style.display = 'inline-block';
        listBtn.style.display = 'none';

        
        alwatsBtn.style.display = 'inline-block';
        oneBtn.style.display = 'none';
        neverBtn.style.display = 'none';

        // 点击事件处理函数
        function togglePlayPause() {
            if (playBtn.style.display === 'inline-block') {
                // 如果播放按钮是可见的，则隐藏它并显示暂停按钮
                playBtn.style.display = 'none';
                pauseBtn.style.display = 'inline-block';
            } else {
                // 否则，隐藏暂停按钮并显示播放按钮
                pauseBtn.style.display = 'none';
                playBtn.style.display = 'inline-block';
            }
        }

        function togglePalyMode() {
            if (ramdomBtn.style.display === 'inline-block') {
                // 如果播放按钮是可见的，则隐藏它并显示暂停按钮
                ramdomBtn.style.display = 'none';
                listBtn.style.display = 'inline-block';
            } else {
                // 否则，隐藏暂停按钮并显示播放按钮
                listBtn.style.display = 'none';
                ramdomBtn.style.display = 'inline-block';
            }
        }

        var currentListModeBtn = 'always-list-btn';
        function toggleListMode() {
            // 根据 currentListModeBtn 的值找到当前显示的按钮
            var currentBtn = document.getElementById(currentListModeBtn);

            // 隐藏当前显示的按钮
            currentBtn.style.display = 'none';

            // 根据 currentListModeBtn 的值切换到下一个按钮
            switch (currentListModeBtn) {
                case 'always-list-btn':
                    currentListModeBtn = 'one-list-btn';
                    break;
                case 'one-list-btn':
                    currentListModeBtn = 'never-list-btn';
                    break;
                case 'never-list-btn':
                    currentListModeBtn = 'always-list-btn';
                    break;
            }

            // 显示下一个按钮
            var nextBtn = document.getElementById(currentListModeBtn);
            nextBtn.style.display = 'inline-block';
        }

        // 为按钮添加点击事件监听器
        // playBtn.addEventListener('click', togglePlayPause);
        // pauseBtn.addEventListener('click', togglePlayPause);

        var audioPlayer = document.getElementById('audioPlayer');
        var progressBar = document.getElementById('progressBar');
        var playBarWrap = document.querySelector('.play-bar-wrap');

        var currentTimeSpan = document.getElementById('currentTime');
        var totalTimeSpan = document.getElementById('totalTime');

        function formatTime(seconds) {
            var minutes = Math.floor(seconds / 60);
            var remainingSeconds = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, "0")}:${remainingSeconds.toString().padStart(2, "0")}`;
        }
        audioPlayer.addEventListener('loadedmetadata', function() {
            // 当音频元数据加载完成后，可以设置进度条的最大宽度
            // progressBar.style.width = '100%';
        });

        audioPlayer.addEventListener('timeupdate', function() {
            currentTimeSpan.textContent = formatTime(audioPlayer.currentTime);
            // 计算并设置进度条的当前宽度
            var percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressBar.style.width = percentage + '%';
            totalTimeSpan.textContent = formatTime(audioPlayer.duration);
        });

        // 点击播放/暂停按钮切换播放状态
        playBtn.addEventListener('click', function() {
            togglePlayPause()
            var isPlaying = audioPlayer.paused;
            if (isPlaying) {
                audioPlayer.play();
            } else {
                audioPlayer.pause();
            }
        });

        pauseBtn.addEventListener('click', function() {
            togglePlayPause()
            audioPlayer.pause();
        });

        // 确保进度条在播放条内部居中显示
        playBarWrap.addEventListener('click', function(e) {
            console.log(e)
            var playBarWrapRect = playBarWrap.getBoundingClientRect();
            // console.log(playBarWrapRect)
            var clickX = e.clientX - playBarWrapRect.left;
            var width = playBarWrapRect.width;
            audioPlayer.currentTime = (clickX / width) * audioPlayer.duration;
        });

        
        ramdomBtn.addEventListener('click', togglePalyMode);
        listBtn.addEventListener('click', togglePalyMode);

        
        alwatsBtn.addEventListener('click', toggleListMode);
        oneBtn.addEventListener('click', toggleListMode);
        neverBtn.addEventListener('click', toggleListMode);
    </script>
</body>
</html>
